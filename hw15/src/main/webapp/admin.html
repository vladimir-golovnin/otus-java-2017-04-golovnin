<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Manage Users</title>
    <script>
        var ws = new WebSocket("ws://localhost:8080/socket");

ws.onopen = function(){
    document.getElementById("status").innerHTML = "<p>Open</p>";
};

ws.onmessage = function (evt){
    var message = JSON.parse(evt.data);
    var usersData = "";
    message.forEach(function(entry){
            usersData += entry.name;
        });
    document.getElementById("data").innerHTML = usersData;
};

ws.onclose = function(evt){
    document.getElementById("status").innerHTML = "<p>Connection to server is lost!</p>";
};
ws.onerror = function(error){
    document.getElementById("status").innerHTML = "<p>Error</p>";
};

function addUser(){
    var name = document.getElementById("name").value;
    var age = document.getElementById("age").value;
    if(name != "" && age != ""){
        var userAction = {
            action: 1,
            user: { id: 0, name: name, age: age}
        };
        ws.send(JSON.stringify(userAction));
    }
};
    </script>
</head>
<body>
<form>
    name:<input type="text" id="name" autocomplete="off">
    age:<input type="text" id="age" autocomplete="off">
    <input type="button" value="add" onclick=addUser()>
</form>
<div id="data"></div>
<div id="status"></div>
</body>
</html>
